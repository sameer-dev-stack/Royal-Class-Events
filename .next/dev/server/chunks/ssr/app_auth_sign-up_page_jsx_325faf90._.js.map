{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Meskat/Documents/Royal-Class-Events-main/app/auth/sign-up/page.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { Suspense } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { useForm } from \"react-hook-form\";\nimport { useMutation } from \"convex/react\";\nimport { api } from \"@/convex/_generated/api\";\nimport { toast } from \"sonner\";\nimport Link from \"next/link\";\nimport { Crown, Mail, Lock, User, ArrowLeft, Loader2, Sparkles } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport useAuthStore from \"@/hooks/use-auth-store\";\n\nfunction SignUpForm() {\n    const router = useRouter();\n    const searchParams = useSearchParams();\n    const role = searchParams.get(\"role\") || \"attendee\";\n    const registerMutation = useMutation(api.users.registerUser);\n    const { login } = useAuthStore();\n\n    const {\n        register,\n        handleSubmit,\n        formState: { errors, isSubmitting },\n    } = useForm();\n\n    const onSubmit = async (data) => {\n        try {\n            const result = await registerMutation({\n                name: data.name,\n                email: data.email,\n                password: data.password,\n                role: role,\n            });\n\n            if (!result.success) {\n                if (result.error === \"Email already registered!\") {\n                    toast.error(\"A user Already Exist with this Email\");\n                } else {\n                    toast.error(result.error || \"Registration failed\");\n                }\n                return;\n            }\n\n            // Store user data and token in Zustand\n            login(\n                {\n                    _id: result.userId,\n                    name: data.name,\n                    email: data.email,\n                    role: role,\n                },\n                result.token\n            );\n\n            toast.success(\"Account created successfully!\");\n            router.push(\"/\");\n        } catch (error) {\n            console.error(\"Registration error:\", error);\n            // Fallback for network or unexpected errors\n            toast.error(\"Something went wrong. Please try again.\");\n        }\n    };\n\n    return (\n        <div className=\"w-full max-w-[450px] space-y-8\">\n            {/* Logo & Header */}\n            <div className=\"text-center space-y-2\">\n                <Link href=\"/auth/select-role\" className=\"inline-flex items-center gap-2 mb-4 group text-muted-foreground hover:text-amber-500 transition-colors\">\n                    <ArrowLeft className=\"w-4 h-4\" />\n                    <span className=\"text-xs font-bold uppercase tracking-widest\">Back to Roles</span>\n                </Link>\n                <h1 className=\"text-4xl font-black tracking-tight\">Create <span className=\"text-gradient-gold\">Account</span></h1>\n                <p className=\"text-muted-foreground font-light\">Join as an <span className=\"text-amber-500 font-bold capitalize\">{role}</span></p>\n            </div>\n\n            {/* Registration Form */}\n            <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6 bg-card/40 backdrop-blur-md p-8 rounded-[2rem] border border-white/5 shadow-2xl relative overflow-hidden\">\n                <div className=\"absolute -right-8 -top-8 w-24 h-24 bg-amber-500/5 rounded-full blur-2xl\" />\n\n                <div className=\"space-y-4 relative z-10\">\n                    <div className=\"space-y-2\">\n                        <Label htmlFor=\"name\">Full Name</Label>\n                        <div className=\"relative\">\n                            <User className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                            <Input\n                                id=\"name\"\n                                placeholder=\"John Doe\"\n                                className=\"pl-12 h-12 bg-white/5 border-white/10 rounded-xl\"\n                                {...register(\"name\", { required: \"Name is required\" })}\n                            />\n                        </div>\n                        {errors.name && <p className=\"text-xs text-red-500\">{errors.name.message}</p>}\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <Label htmlFor=\"email\">Email Address</Label>\n                        <div className=\"relative\">\n                            <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                            <Input\n                                id=\"email\"\n                                type=\"email\"\n                                placeholder=\"name@example.com\"\n                                className=\"pl-12 h-12 bg-white/5 border-white/10 rounded-xl\"\n                                {...register(\"email\", { required: \"Email is required\" })}\n                            />\n                        </div>\n                        {errors.email && <p className=\"text-xs text-red-500\">{errors.email.message}</p>}\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <Label htmlFor=\"password\">Password</Label>\n                        <div className=\"relative\">\n                            <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                            <Input\n                                id=\"password\"\n                                type=\"password\"\n                                placeholder=\"Min. 8 characters\"\n                                className=\"pl-12 h-12 bg-white/5 border-white/10 rounded-xl\"\n                                {...register(\"password\", {\n                                    required: \"Password is required\",\n                                    minLength: { value: 8, message: \"Password must be at least 8 characters\" }\n                                })}\n                            />\n                        </div>\n                        {errors.password && <p className=\"text-xs text-red-500\">{errors.password.message}</p>}\n                    </div>\n                </div>\n\n                <div className=\"space-y-4 pt-2 relative z-10\">\n                    <Button\n                        type=\"submit\"\n                        disabled={isSubmitting}\n                        className=\"w-full h-12 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-black font-bold text-lg rounded-xl transition-all shadow-lg shadow-amber-900/20\"\n                    >\n                        {isSubmitting ? (\n                            <Loader2 className=\"w-5 h-5 animate-spin\" />\n                        ) : (\n                            <span className=\"flex items-center gap-2\">\n                                Complete Registration <Sparkles className=\"w-4 h-4\" />\n                            </span>\n                        )}\n                    </Button>\n                    <p className=\"text-[10px] text-center text-muted-foreground font-light px-4\">\n                        By signing up, you agree to our Terms of Service and Privacy Policy.\n                    </p>\n                </div>\n            </form>\n\n            <div className=\"text-center text-sm text-muted-foreground\">\n                Already have an account?{\" \"}\n                <Link href=\"/auth/login\" className=\"text-amber-500 font-bold hover:underline\">Log in</Link>\n            </div>\n        </div>\n    );\n}\n\nexport default function SignUpPage() {\n    return (\n        <div className=\"flex flex-col items-center justify-center min-h-screen py-12 px-6\">\n            <Suspense fallback={<div className=\"text-white\">Loading...</div>}>\n                <SignUpForm />\n            </Suspense>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}