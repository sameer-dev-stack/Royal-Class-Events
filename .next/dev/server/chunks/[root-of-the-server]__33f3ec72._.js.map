{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Meskat/Documents/Royal-Class-Events-main/auth.config.js"],"sourcesContent":["export const authConfig = {\r\n    pages: {\r\n        signIn: '/sign-in',\r\n    },\r\n    callbacks: {\r\n        authorized({ auth, request: { nextUrl } }) {\r\n            const isLoggedIn = !!auth?.user;\r\n            const isOnProtectedPath =\r\n                nextUrl.pathname.startsWith('/my-tickets') ||\r\n                nextUrl.pathname.startsWith('/my-events') ||\r\n                nextUrl.pathname.startsWith('/create-event') ||\r\n                nextUrl.pathname.startsWith('/admin');\r\n\r\n            if (isOnProtectedPath) {\r\n                if (isLoggedIn) return true;\r\n                return false; // Redirect unauthenticated users to login page\r\n            }\r\n\r\n            // Redirect logged-in users away from auth pages\r\n            if (isLoggedIn && (nextUrl.pathname.startsWith('/sign-in') || nextUrl.pathname.startsWith('/sign-up'))) {\r\n                return Response.redirect(new URL('/explore', nextUrl));\r\n            }\r\n\r\n            return true;\r\n        },\r\n        async session({ session, token }) {\r\n            if (token && session.user) {\r\n                session.user.id = token.sub;\r\n                session.user.role = token.role;\r\n                session.user.token = token.convexToken;\r\n            }\r\n            return session;\r\n        },\r\n        async jwt({ token, user }) {\r\n            if (user) {\r\n                token.sub = user.id;\r\n                token.role = user.role;\r\n                token.convexToken = user.token; // The internal Convex session token\r\n            }\r\n            return token;\r\n        }\r\n    },\r\n    providers: [], // Add providers with an empty array for now\r\n}\r\n"],"names":[],"mappings":";;;;AAAO,MAAM,aAAa;IACtB,OAAO;QACH,QAAQ;IACZ;IACA,WAAW;QACP,YAAW,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,EAAE;YACrC,MAAM,aAAa,CAAC,CAAC,MAAM;YAC3B,MAAM,oBACF,QAAQ,QAAQ,CAAC,UAAU,CAAC,kBAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC,iBAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC,oBAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC;YAEhC,IAAI,mBAAmB;gBACnB,IAAI,YAAY,OAAO;gBACvB,OAAO,OAAO,+CAA+C;YACjE;YAEA,gDAAgD;YAChD,IAAI,cAAc,CAAC,QAAQ,QAAQ,CAAC,UAAU,CAAC,eAAe,QAAQ,QAAQ,CAAC,UAAU,CAAC,WAAW,GAAG;gBACpG,OAAO,SAAS,QAAQ,CAAC,IAAI,IAAI,YAAY;YACjD;YAEA,OAAO;QACX;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC5B,IAAI,SAAS,QAAQ,IAAI,EAAE;gBACvB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;gBAC3B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;gBAC9B,QAAQ,IAAI,CAAC,KAAK,GAAG,MAAM,WAAW;YAC1C;YACA,OAAO;QACX;QACA,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACrB,IAAI,MAAM;gBACN,MAAM,GAAG,GAAG,KAAK,EAAE;gBACnB,MAAM,IAAI,GAAG,KAAK,IAAI;gBACtB,MAAM,WAAW,GAAG,KAAK,KAAK,EAAE,oCAAoC;YACxE;YACA,OAAO;QACX;IACJ;IACA,WAAW,EAAE;AACjB"}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Meskat/Documents/Royal-Class-Events-main/convex/_generated/api.js"],"sourcesContent":["/* eslint-disable */\n/**\n * Generated `api` utility.\n *\n * THIS CODE IS AUTOMATICALLY GENERATED.\n *\n * To regenerate, run `npx convex dev`.\n * @module\n */\n\nimport { anyApi, componentsGeneric } from \"convex/server\";\n\n/**\n * A utility for referencing Convex functions in your app's API.\n *\n * Usage:\n * ```js\n * const myFunctionReference = api.myModule.myFunction;\n * ```\n */\nexport const api = anyApi;\nexport const internal = anyApi;\nexport const components = componentsGeneric();\n"],"names":[],"mappings":";;;;;;;;AAAA,kBAAkB,GAClB;;;;;;;CAOC,GAED;AAAA;AAAA;;AAUO,MAAM,MAAM,kKAAM;AAClB,MAAM,WAAW,kKAAM;AACvB,MAAM,aAAa,IAAA,6MAAiB"}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Meskat/Documents/Royal-Class-Events-main/auth.js"],"sourcesContent":["import NextAuth from 'next-auth';\r\nimport { authConfig } from './auth.config';\r\nimport Credentials from 'next-auth/providers/credentials';\r\nimport { z } from 'zod';\r\nimport { ConvexHttpClient } from \"convex/browser\";\r\nimport { api } from \"./convex/_generated/api\";\r\n\r\n// Initialize Convex Client for server-side auth calls\r\nconst convexUrl = process.env.NEXT_PUBLIC_CONVEX_URL;\r\nconst convex = convexUrl ? new ConvexHttpClient(convexUrl) : null;\r\n\r\nif (!convexUrl) {\r\n    console.warn(\"NEXT_PUBLIC_CONVEX_URL is not defined in auth.js. Server-side Convex calls will fail.\");\r\n}\r\n\r\nexport const { auth, signIn, signOut, handlers } = NextAuth({\r\n    ...authConfig,\r\n    providers: [\r\n        Credentials({\r\n            async authorize(credentials) {\r\n                const parsedCredentials = z\r\n                    .object({ email: z.string().email(), password: z.string().min(6) })\r\n                    .safeParse(credentials);\r\n\r\n                if (parsedCredentials.success) {\r\n                    const { email, password } = parsedCredentials.data;\r\n\r\n                    try {\r\n                        if (!convex) {\r\n                            console.error(\"Convex Client not initialized\");\r\n                            return null;\r\n                        }\r\n\r\n                        // Call the unified login mutation in Convex\r\n                        const result = await convex.mutation(api.users.login, {\r\n                            email,\r\n                            password,\r\n                        });\r\n\r\n                        if (result.success) {\r\n                            return {\r\n                                id: result.userId,\r\n                                name: result.name,\r\n                                email: result.email,\r\n                                role: result.role,\r\n                                token: result.token, // Convex session token\r\n                            };\r\n                        }\r\n                    } catch (error) {\r\n                        console.error('NextAuth: Convex Authorization failed', error);\r\n                        return null;\r\n                    }\r\n                }\r\n\r\n                console.log('Invalid credentials or format');\r\n                return null;\r\n            },\r\n        }),\r\n    ],\r\n});\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;;;;;;;AAEA,sDAAsD;AACtD,MAAM;AACN,MAAM,SAAS,uCAAY,IAAI,qLAAgB,CAAC,aAAa;AAE7D;;AAIO,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,IAAA,kKAAQ,EAAC;IACxD,GAAG,8HAAU;IACb,WAAW;QACP,IAAA,uKAAW,EAAC;YACR,MAAM,WAAU,WAAW;gBACvB,MAAM,oBAAoB,oLAAC,CACtB,MAAM,CAAC;oBAAE,OAAO,oLAAC,CAAC,MAAM,GAAG,KAAK;oBAAI,UAAU,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;gBAAG,GAChE,SAAS,CAAC;gBAEf,IAAI,kBAAkB,OAAO,EAAE;oBAC3B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,kBAAkB,IAAI;oBAElD,IAAI;wBACA,IAAI,CAAC,QAAQ;4BACT,QAAQ,KAAK,CAAC;4BACd,OAAO;wBACX;wBAEA,4CAA4C;wBAC5C,MAAM,SAAS,MAAM,OAAO,QAAQ,CAAC,oIAAG,CAAC,KAAK,CAAC,KAAK,EAAE;4BAClD;4BACA;wBACJ;wBAEA,IAAI,OAAO,OAAO,EAAE;4BAChB,OAAO;gCACH,IAAI,OAAO,MAAM;gCACjB,MAAM,OAAO,IAAI;gCACjB,OAAO,OAAO,KAAK;gCACnB,MAAM,OAAO,IAAI;gCACjB,OAAO,OAAO,KAAK;4BACvB;wBACJ;oBACJ,EAAE,OAAO,OAAO;wBACZ,QAAQ,KAAK,CAAC,yCAAyC;wBACvD,OAAO;oBACX;gBACJ;gBAEA,QAAQ,GAAG,CAAC;gBACZ,OAAO;YACX;QACJ;KACH;AACL"}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Meskat/Documents/Royal-Class-Events-main/app/api/auth/%5B...nextauth%5D/route.js"],"sourcesContent":["import { handlers } from \"@/auth\";\nexport const { GET, POST } = handlers;\n"],"names":[],"mappings":";;;;;;AAAA;;AACO,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,kHAAQ"}}]
}